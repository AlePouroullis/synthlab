<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SynthLab</title>

    <!-- Blocking script to prevent theme flash -->
    <script>
      (function() {
        const stored = localStorage.getItem('synthlab-theme');
        const theme = stored || (window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
        document.documentElement.setAttribute('data-theme', theme);
      })();
    </script>

    <!-- Fonts: Comment/uncomment to try different options -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <!-- Option 1: Space Grotesk - techy/electronic -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <!-- Option 2: Inter - clean/professional -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <!-- Option 3: Outfit - modern/geometric -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet" />

    <link rel="stylesheet" href="/src/styles.css" />
  </head>
  <body>
    <div id="app">
      <header>
        <div class="header-left">
          <h1>SynthLab</h1>
          <p class="intro">A synthesizer that LLMs can play</p>
        </div>
        <div class="header-right">
          <span id="mcp-status" class="mcp-status"></span>
          <button id="theme-toggle" class="icon-btn" aria-label="Toggle theme">
            <svg class="icon-sun" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
            </svg>
            <svg class="icon-moon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
            </svg>
          </button>
          <button id="chat-toggle" class="chat-toggle" aria-label="Toggle chat panel">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
            </svg>
            <span class="tooltip">Toggle chat <kbd>âŒ˜</kbd><kbd>/</kbd></span>
          </button>
        </div>
      </header>

      <div class="main-layout">
        <!-- Left: Synth controls -->
        <div class="synth-section">
          <div id="synth-controls"></div>
          <canvas id="visualizer" width="600" height="150"></canvas>
        </div>

        <!-- Right: Chat -->
        <div id="chat-container"></div>
      </div>
    </div>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
